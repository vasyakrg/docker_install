---
- hosts: 'localhost'
  roles:
    - role: 'ansible-role-docker'
      become: true
  tasks:
    - name: 'Ensure that the docker service is functional'
      become: true
      command: 'docker info'
      register: result
      retries: 5
      delay: 10
      until: 'result is success'

    - name: 'Pull in the latest nginx container'
      become: true
      docker_image:
        name: 'nginx:latest'

    - name: 'Start the nginx container'
      become: true
      docker_container:
        name: 'nginx'
        image: 'nginx:latest'
        state: 'started'
